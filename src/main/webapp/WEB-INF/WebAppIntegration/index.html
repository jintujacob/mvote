<!DOCTYPE html>
<html>
<head>
    <title>Home</title>
    <link rel="stylesheet"  href="./css/main.css" /> 
    <link rel="stylesheet" href="./css/jquery-ui.css">
    <script src="./js/jquery-1.10.2.min.js"></script>
    <script src="./js/jquery-ui.min.js"></script>
    <script src="./js/main.js"></script>
    
</head>
<body>
<div id="container">
    <div>
        <table align="center" >
            <tr>
                <td> Username</td>
                <td> : </td>
                <td> <input type="text" id="form_login_uid" /> </td>
            </tr>
            <tr>
                <td> Password</td>
                <td> : </td>
                <td> <input type="text" id="form_login_pass" /> </td>
            </tr>
            
            <tr>
                <td colspan="3">  <input type="submit" id="form_login_submit" /> </td>
            </tr>
            
            <tr>
                <td colspan="3"> <p class="form_login_error_msg"> <!-- ajax it --></p> </td>
            </tr>
        </table>
    </div>
</div>    
</body>

<script type="text/javascript">

$(document).ready(function(){
    $('#form_login_submit').click(function(){
    	username =  $('#form_login_uid').val();
    	password =  $('#form_login_pass').val();
    	if(username != "" && password != ""){
    		verifyUserLogin(username, password);	
    	}else{
    		$('.form_login_error_msg').html("Username and Password is mandatory");
    	}
    });
     
});

function verifyUserLogin(username, password)
{
    obj = { "uid": username,
            "password": password
        };
    jsonString =JSON.stringify(obj);
    
    $.ajax({
        type: "POST",
        url: 'http://localhost:8080/mvote/access/validateSystemUser',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: jsonString,
        success: function(response) {
            populateLoginResponse(response);
        },
        error:function(){
            alert("Connection Error. Network failure or Server unavailable");
        }
    });    	
}

function populateLoginResponse(response)
{
    if(response.customMessage == "SUCCESS"){
    	location.href = './ui/home.html?loginstat=true';
    }else{
    	$('.form_login_error_msg').html(response.customMessage);
    }	
}


</script>

</html>